# FPGA FAST特征提取实现总体框架

![框架](../FPGA-FAST/asset/FAST_FRAME.png)

$$
\text { score }=\max \left(\sum_{x \in S_{\text {bright }}}\left|I_{p \rightarrow x}-I_p\right|-t, \sum_{x \in S_{\text {dark }}}\left|I_p-I_{p \rightarrow x}\right|-t\right) \tag{1}
$$




## bug 

当`input_fifo.vhd`中的address_generator进程中的`address_write<=to_unsigned(1, 10);`设置address_write的初值为1时, 会存在初始状态少输入一个数据的bug.

要写入的数据为`18 18 18 19 18 18 17 16 15 15 15 15 15`, 可以看到, 首先第一个数据写入了ram0的第2个位置, 而在第2拍时, 应该向第三个位置写入的`18`, 仍然写入的是第二个位置, 覆盖了第一拍写入的`18`.

![](asset/20221027174904.png)  

上诉分析有错误, 最终移位寄存器,会存储到那个18. 但如果address_write的初始值为0的话, 那就是真的丢失了一个数据了.

![](asset/20221027193703.png)  